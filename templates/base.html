<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Money Matrix - Professional Personal Finance Management Platform">
    <meta name="keywords" content="personal finance, budgeting, expense tracking, financial analytics, money management">
    <meta name="author" content="Money Matrix Team">
    <title>{% block title %}Money Matrix - Professional Finance Management{% endblock %}</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon.ico') }}">
    
    <!-- Global Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reset.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/animations.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/glassmorphism.css') }}">
    
    <!-- Feature-specific styles -->
    {% block styles %}{% endblock %}
    
    <!-- Preload critical resources -->
    <link rel="preload" href="{{ url_for('static', filename='css/fonts.css') }}" as="style">
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-background no-glitch"></div>
    
    <!-- Particles Background -->
    <div id="particles-js" class="no-glitch"></div>
    
    <!-- Navigation (hidden on auth pages) -->
    {% if request.path not in ['/auth/login', '/auth/register', '/auth/reset-password'] %}
    {% include 'navigation.html' %}
    {% endif %}
    
    <!-- Main Content -->
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>
    
    <!-- Global Scripts -->
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script src="{{ url_for('static', filename='js/api.js') }}"></script>
    <script src="{{ url_for('static', filename='js/theme-toggle.js') }}"></script>
    <script src="{{ url_for('static', filename='js/toast.js') }}"></script>
    
    <!-- Feature-specific scripts -->
    {% block scripts %}{% endblock %}
    
    <!-- Smooth Scroll Enhancement -->
    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Add loading animation to all links
        document.addEventListener('DOMContentLoaded', function() {
            const links = document.querySelectorAll('a');
            links.forEach(link => {
                link.addEventListener('click', function() {
                    this.classList.add('link-clicked');
                    setTimeout(() => {
                        this.classList.remove('link-clicked');
                    }, 300);
                });
            });
        });
    </script>
</body>
</html>